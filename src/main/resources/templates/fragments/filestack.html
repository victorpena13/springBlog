<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>

</head>
<body>
<th:block th:fragment="filestack">
<script src="/static/js/keys.js"></script>
<script src="//static.filestackapi.com/filestack-js/3.x.x/filestack.min.js"></script>
<script>
    const client = filestack.init(fileStackKey);
    var options = {
        maxSize: 10 * 1024 * 1024,
        accept: 'image/*',
        uploadInBackground: false
    };
    var picker = client.picker().open();

    var form = document.getElementById('reg');
    var fileInput = document.getElementById('fileupload');
    var btn = document.getElementById('picker');
    var nameBox = document.getElementById('nameBox');
    // Add our event listeners
    btn.addEventListener('click', function (e) {
        e.preventDefault();
        picker.open();
    });
    // Helper to overwrite the field input value
    var photos = [];
    function updateForm (result) {
        var fileData = result.filesUploaded[0];
        photos.push(fileData.url);
        fileInput.value = photos.join('-');
        // Some ugly DOM code to show some data.
        var name = document.createTextNode('Selected: ' + fileData.filename);
        nameBox.appendChild(name);
    }

</script>
</th:block>
</body>
</html>